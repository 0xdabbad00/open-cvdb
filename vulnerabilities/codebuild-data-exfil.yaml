title: Codebuild data exfil
slug: codebuild-data-exfil
cves: null
affectedPlatforms:
- AWS
affectedServices: null
image: https://d1.awsstatic.com/developer-tools/ImgHead_AWS-CodeBuild.b0de80b5eee6e84fd52289ec330acae278570691.jpg
severity: Low
discoveredBy:
  name: Aidan Steele
  org: null
  domain: null
  twitter: https://www.twitter.com/__steele
disclosedAt: 2022/02/04
exploitabilityPeriod: null
knownITWExploitation: false
summary: |
  When customers attach a CodeBuild project to their VPC, CodeBuild’s build container
  will apply the same network routing rules as defined in the customer’s VPC Security Group.
  However, CodeBuild EC2 hosts retained Internet connectivity via AWS's own VPC, thus allowing
  an attacker to bypass any custom VPC rules the customer had set up, and use CodeBuild for
  data exfiltration from the targeted environment. AWS later updated the CodeBuild service
  to block all outbound network access for newly created CodeBuild projects which contain a
  customer-defined VPC configuration.
manualRemediation: |
  None required
detectionMethods: null
contributer: https://github.com/ramimac
references:
- https://awsteele.com/blog/2022/02/03/aws-vpc-data-exfiltration-using-codebuild.html
